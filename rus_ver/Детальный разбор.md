1. Устройство библиотеки
2. Как устанавливается уникальное число для каждой книги/страницы
3. Какие адреса в библиотеке существуют
4. Как вычисляется адрес книги/страницы в библиотеке
5. Как вычисляется контент страницы по адресу
6. Как возможна генерация названий по адресу
7. Как вычислить сколько примерно страниц с заданным текстом

# Устройство библиотеки
Вавилонская библиотека — математическая идея, которая утверждает, что существует «библиотека» содержащая в себе все существующие варианты перебора 29 символов (английский алфавит + точка, запятая и пробел). Эти варианты заключены в «книги» по 410 страниц, где 40 строк и в каждой строке по 80 символов. Самый главный закон библиотеки — в ней нет повторяющихся книг, каждая книга уникальна. Таким образом, количество книг равно количеству возможных вариантов перестановки $410 \cdot 40 \cdot 80 = 1'312'000$, т.е. $2^{1312000}$. Это число также называют числом Борхеса

Библиотека состоит из комнат, в каждой из которых 4 стены, в каждой стене 5 полок и на каждой полке содержится 32 книги.

# Как обозначить UID для каждой страницы
> *UID - Unique Identifikator*

Во-первых надо сделать так, чтобы каждая книга в комнате была с *UID*. Это можно сделать например с помощью конкатенации строк численных значений номеров стены, полки и книги, причем каждое число должно будет состоять из константного количества цифр (это нужно для того, чтобы каждый UID соответствовал одному паттерну). Таким образом для стены это будет 1 цифра (т.к. всегда 4 стены), для шкафа это будет также одна цифра, а для книги это будет 2 цифры, т.к. у нас есть 32 книги.

Далее для того, чтобы присвоить UID для страницы надо просто сложить UID книги и 3 цифры, относящиеся к страницы.

Можно пойти даже далее, присвоить UID для строки, и даже для символа подобным образом

> *В дальнейшем UID будет обозначаться как «локация в библиотеке»*
# Что такое адрес в библиотеке
Адрес в библиотеке состоит из конкатенации UID и сида, но не в виде строк, а в виде чисел. Это используется, чтобы обеспечить успешное кодирование и декодирование адреса в страницу и страницы в адрес. Для этого используется такой прием (при декодировании, нам дается адрес):

$$S = A - U \cdot C$$

Где *C* это некое большое константное число. Так мы «выводим» из адреса (*A*) сид (используя свойство, что $a + b = c, \implies b = c - a$).

А так как мы сделали так, чтобы локация всегда была одинаковой длинны и по цифрам, и по разрядам, а затем мы сдвинули локацию на первые разряды, умножая её на константу, мы можем быть уверены, что UID и сид не «перемешаются» между собой, так как сид будет на последних разрядах адреса, и мы можем быть уверены в том, что при вычитании локации из адреса мы всегда получил 2 слагаемое, которое является сидом к странице.

Соответственно нетрудно догадаться, как получить адрес, зная сид и локацию мы можем получить адрес в библиотеке:

$$A = S + U \cdot C$$

## Как вычисляется константа *C*

Данная константа вычисляется как *длинна набора символов для генерации текстов в библиотеке* (в дальнейшем — *чарсет* ) в степени *количество строк на странице, умножить на количество символов в строке* (т.е. сколько символов может уместиться на странице, проще говоря — максимум символов)

$$C = S^{M}$$

Была выбрано именно эта формула, так как $S^M$ это максимально возможное числовое представление страницы, т.е. *сида*. Так как нам надо сделать так, чтобы сид и локация не перемешались в адресе мы сдвигаем локацию именно на это число. Потому что даже в случае, если сид окажется самым большим из всех имеющихся это число сдвинет локацию как раз на следующий разряд.
# Что такое сид для страницы

> *Так как каждая страница это набор случайно сгенерированных чисел, то для достижения того, что при условии, что в алгоритме будет один и тот же адрес, на выходе будет появляться одна и таже страница, нужно сделать так, чтобы у рандома был некий ключ, что позволит каждый раз генерировать одни и те же случайные числа*

Получение сида уже было рассмотрено в предыдущих пунктах, поэтому рассмотрим как получается сид из страницы и как по сиду получается содержание страницы.

## Как по сиду получается содержимое
На самом сам *сид* и есть результат. Правда для этого его надо преобразовать в 29-значную систему счисления, где цифры это английский алфавит, плюс точка, запятая и пробел. И в том случае, если полученный результат меньше чем максимальное количество символов, сид используется для генератора случайных чисел и он дополняет результат случайными буквами из чарсета (ну и если результат больше, он обрезается до нужного значения).
## Как по содержимому вычисляется сид
Для этого вычисляется числовое значение текста, путем преобразования текста в число, с основанием, численно равным *количеству букв в чарсете*. Это можно сделать, например проходясь в цикле по тексту и умножая каждое численное представление букв на *длину чарсета* в степени *итерации цикла*. Важным моментом будет то, что цикл идет по тексту в обратном порядке. Это сделано, потому что в *позиционных* системах счисления значимость цифры возрастает справа налево. Так мы сохраняем порядок оригинального текста.

# Как работают названия

Для того, чтобы получить название по адресу нам потребуется знать локацию книги (UID). Мы будем генерировать названия ровно также, как и содержание страниц, но в данном случае лимит на количество символов будет например *25*, и номер страницы равен *0*.

# Поиск по библиотеке
Чтобы вычислить, сколько примерно имеется появлений некой надписи в текстах, можно использовать следующий подход:

1. **Определение параметров**:
   - Пусть \( N \) — количество текстов.
   - Пусть \( L \) — количество символов в каждом тексте.
   - Пусть \( M \) — длина искомой надписи.

2. **Общее количество символов**:
   Общее количество символов во всех текстах будет равно \( N \times L \).

3. **Вероятность появления надписи**:
   Если предположить, что символы распределены равномерно и независимо, вероятность появления искомой надписи в одном тексте можно оценить как:
   $$P = \frac{L - M + 1}{L}$$
   Это количество возможных позиций, где может начинаться надпись, деленное на общее количество символов.

4. **Ожидаемое количество появлений**:
   Ожидаемое количество появлений надписи в одном тексте будет равно:
   
   $$E = P \times (L - M + 1)$$

5. **Общее количество появлений**:
   Тогда логарифм ожидаемого количества появлений во всех текстах искомой фразы будет:
   
   $$n = \log_{10}(N) + log_{10}(E)$$

Таким образом, вы получите значение $10^n$, которое будет представлять приблизительное количество появлений искомой надписи в текстах.

Однако, учитывая, сколько вариантов страниц, и возможных вариантов перестановки количество результатов будет всегда примерно одинаково