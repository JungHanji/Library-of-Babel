1. Arrangement of the library
2. How a unique number is set for each book/page
3. What are the addresses in the library
4. How the address of a book/page in a library is calculated
5. How the content of a page is calculated from the address
6. How titles can be generated by address
7. How to calculate how many pages with a given text are approximately

# The library device
The Library of Babel is a mathematical idea that states that there exists a “library” containing all existing variants of 29 symbols (English alphabet + period, comma and space). These variants are enclosed in “books” of 410 pages with 40 lines and 80 characters in each line. The most important law of the library is that there are no repeating books, each book is unique. Thus, the number of books is equal to the number of possible permutations $410 \cdot 40 \cdot 80 = $1'312'000$, i.e. $2^{1312000}$. This number is also called the Borges number

A library consists of rooms, each room has 4 walls, each wall has 5 shelves and each shelf contains 32 books.

# How to designate a UID for each page
> *UID - Unique Identifikator*

First of all, you need to make every book in the room with *UID*. This can be done, for example, by concatenating strings of numeric values of wall, shelf and book numbers, with each number consisting of a constant number of digits (this is to ensure that each UID corresponds to a single pattern). So for a wall it will be 1 digit (since there are always 4 walls), for a cabinet it will also be one digit, and for a book it will be 2 digits since we have 32 books.

Then to assign a UID to a page, you simply add the UID of the book and the 3 digits associated with the page.

We can go even further and assign a UID for a string, and even for a character like this

> *The UID will hereafter be referred to as “library location”.
# What is a library address
An address in a library consists of a concatenation of a UID and a seed, but as numbers rather than strings. This is used to ensure successful encoding and decoding of address to page and page to address. To do this, the following technique is used (when decoding, we are given the address):

$$S = A - U\cdot C$$

Where *C* is some large constant number. This is how we “derive” seed from address (*A*) (using the property that $a + b = c, \implies b = c - a$).

And since we made the location always be the same length in digits and digits, and then we shifted the location to the first digits, multiplying it by a constant, we can be sure that the UID and the seed will not “mix” with each other, since the seed will be on the last digits of the address, and we can be sure that when subtracting the location from the address we always got the 2 summand, which is the seed to the page.

Accordingly it is not hard to guess how to get the address, knowing the seed and the location we can get the address in the library:

$$A = S + U \cdot C$$

## How the constant *C* is calculated

This constant is calculated as the *length of the character set for generating texts in the library* (hereafter referred to as *charset* ) times the *number of lines on the page, times the number of characters per line* (i.e. how many characters can fit on the page, simply put - maximum characters)

$$C = S^{M}$$

This formula was chosen because $S^M$$ is the maximum possible numerical representation of the page, i.e. *seed*. Since we need to make sure that the seed and location are not mixed up in the address, we shift the location by this number. Because even if the seed is the largest of all available this number will shift the location just to the next digit.
# What is a seed for a page #

> *Since each page is a set of randomly generated numbers, in order to achieve that the same page will appear at the output provided that the algorithm has the same address, it is necessary to make the randomizer have some kind of key, which will allow it to generate the same random numbers every time.

Obtaining the seed has already been discussed in the previous paragraphs, so let's look at how the seed is obtained from the page and how the content of the page is obtained from the seed.

## How the seed is used to get the content ##
The *seed* itself is the result. But for this purpose it must be converted to 29-digit number system, where digits are English alphabet, plus dot, comma and space. And if the result is less than the maximum number of characters, the seed is used for the random number generator and it adds random letters from the charset to the result (and if the result is larger, it is trimmed to the required value).
## How the content is used to calculate the seed
To do this, the numeric value of the text is calculated by converting the text to a number, with a base numerically equal to *the number of letters in the charset*. This can be done, for example, by looping through the text and multiplying each numerical representation of the letters by the *charset length* to the extent of the *iteration of the loop*. The important point would be that the loop goes through the text in reverse order. This is done because in *positional* number systems, the significance of a digit increases from right to left. This is how we preserve the order of the original text.

# How titles work

In order to get a title from an address we need to know the location of the book (UID). We will generate titles in exactly the same way as page content, but in this case the character limit will be for example *25*, and the page number is *0*.

# Search the library
To calculate how many occurrences of a certain inscription in texts there are, we can use the following approach:

1. **Parameter definition**:
   - Let \( N \) be the number of texts.
   - Let \( L \) be the number of characters in each text.
   - Let \( M \) be the length of the desired inscription.

2. **Total number of characters**:
   The total number of characters in all the texts will be \( N \times L \).

3. **Probability of occurrence of an inscription**:
   Assuming that the characters are uniformly and independently distributed, the probability of occurrence of the desired inscription in a single text can be estimated as:
   $$P = \frac{L - M + 1}{L}$$
   This is the number of possible positions where the inscription can start, divided by the total number of characters.

4. **Expected number of appearances**:
   The expected number of appearances of an inscription in one text will be equal to:
   
   $$E = P \times (L - M + 1)$$

5. **Total number of appearances**:
   Then the total expected number of appearances in all texts will be:
   
   $$E_{total} = N \times E$$

6. **Approximate value**:
   If you need to specify the result as a power of 10, you can take the logarithm:
   
   $$n \approx \log_{10}(E_{total})$$
   
   and round it to the nearest whole number.

You will thus get a value of $10^n$$, which will represent the approximate number of occurrences of the searched inscription in the texts.

However, given how many page variants, and possible permutations the number of results will always be about the same